Index: login.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nrequire_once __DIR__.'/includes/config.php';\r\n\r\n$logued = false;\r\n$tituloPagina = 'Login';\r\n\r\n$contenidoPrincipal= <<<EOS\r\n\r\n<html lang=\"en\" >\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <title>CodePen - Finance Mobile Application-UX/UI Design Screen One</title>\r\n  <script type=\"module\" src=\"https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js\"></script>\r\n<script nomodule src=\"https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js\"></script><link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css\">\r\n\r\n<link rel='stylesheet' href=\"css/style.css\">\r\n</head>\r\n<body>\r\n<!-- partial:index.partial.html -->\r\n<div class=\"screen-1\">\r\n  <svg class=\"logo\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" width=\"300\" height=\"300\" viewbox=\"0 0 640 480\" xml:space=\"preserve\">\r\n    <g transform=\"matrix(3.31 0 0 3.31 320.4 240.4)\">\r\n      <circle style=\"stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(61,71,133); fill-rule: nonzero; opacity: 1;\" cx=\"0\" cy=\"0\" r=\"40\"></circle>\r\n    </g>\r\n    <g transform=\"matrix(0.98 0 0 0.98 268.7 213.7)\">\r\n      <circle style=\"stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;\" cx=\"0\" cy=\"0\" r=\"40\"></circle>\r\n    </g>\r\n    <g transform=\"matrix(1.01 0 0 1.01 362.9 210.9)\">\r\n      <circle style=\"stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;\" cx=\"0\" cy=\"0\" r=\"40\"></circle>\r\n    </g>\r\n    <g transform=\"matrix(0.92 0 0 0.92 318.5 286.5)\">\r\n      <circle style=\"stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;\" cx=\"0\" cy=\"0\" r=\"40\"></circle>\r\n    </g>\r\n    <g transform=\"matrix(0.16 -0.12 0.49 0.66 290.57 243.57)\">\r\n      <polygon style=\"stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;\" points=\"-50,-50 -50,50 50,50 50,-50 \"></polygon>\r\n    </g>\r\n    <g transform=\"matrix(0.16 0.1 -0.44 0.69 342.03 248.34)\">\r\n      <polygon style=\"stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;\" vector-effect=\"non-scaling-stroke\" points=\"-50,-50 -50,50 50,50 50,-50 \"></polygon>\r\n    </g>\r\n  </svg>\r\n  <form method=\"post\" action=\"procesarLogin.php\">\r\n  <div class=\"email\">\r\n    <label for=\"email\">Email Address</label>\r\n    <div class=\"sec-2\">\r\n      <ion-icon name=\"mail-outline\"></ion-icon>\r\n      <input type=\"email\" name=\"email\" placeholder=\"usuario@mail.com\"/>\r\n    </div>\r\n  </div>\r\n  <div class=\"password\">\r\n    <label for=\"password\">Password</label>\r\n    <div class=\"sec-2\">\r\n      <ion-icon name=\"lock-closed-outline\"></ion-icon>\r\n      <input class=\"pas\" type=\"password\" name=\"password\" placeholder=\"············\"/>\r\n    </div>\r\n  </div>\r\n\r\n  <input class=\"login\" type=\"submit\" name=\"Login\" value=\"Iniciar sesión\" />\r\n</form>\r\n</div>\r\n<!-- partial -->\r\n  \r\n</body>\r\n</html>\r\n\r\nEOS;\r\n\r\nrequire __DIR__.'/includes/layoutLogin.php';
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/login.php b/login.php
--- a/login.php	(revision 268fe515861317123b2433ef3e037a5a692ef387)
+++ b/login.php	(date 1675882225135)
@@ -4,6 +4,12 @@
 
 $logued = false;
 $tituloPagina = 'Login';
+if (empty($_GET)) {
+    $log=true;
+}
+else
+    $log=$_GET["log"];
+
 
 $contenidoPrincipal= <<<EOS
 
@@ -65,4 +71,9 @@
 
 EOS;
 
+if(!$log)
+    $contenidoPrincipal.= "<h3 class='erroneo'>Email o contraseña incorrectos</h3>";
+
+$contenidoPrincipal.= "</body></html>";
+
 require __DIR__.'/includes/layoutLogin.php';
\ No newline at end of file
Index: deletePatient.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nrequire_once __DIR__ . '/includes/config.php';\r\nrequire_once __DIR__ . '/includes/patient.php';\r\nrequire_once __DIR__ . '/includes/usuarios.php';\r\n\r\n$tituloPagina = 'Search-Patient';\r\n\r\n// Connect to the database\r\n$conn = mysqli_connect(\"localhost\", \"root\", \"\", \"bbdd\");\r\n\r\n// Check the connection\r\nif (!$conn) {\r\n    die(\"Connection failed: \" . mysqli_connect_error());\r\n}\r\n\r\n\r\n$id=$_GET[\"id\"];\r\n//$id = isset($_POST[\"nhis\"]) ? $_POST[\"nhis\"] : null;\r\n$sql = \"DELETE FROM patients WHERE NHIS = $id\";\r\n\r\n\r\n$result = mysqli_query($conn, $sql);\r\n$patients = [];\r\n\r\n\r\n\r\n\r\n$tabla = \"\";\r\n\r\n\r\n    $tabla .= \"0 results\";\r\n\r\n// Close the connection\r\nmysqli_close($conn);\r\n\r\n$contenidoPrincipal = $tabla;\r\n$contenidoPrincipal .= \"</div>\";\r\n\r\nrequire __DIR__.'/includes/layout.php';
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/deletePatient.php b/deletePatient.php
--- a/deletePatient.php	(revision 268fe515861317123b2433ef3e037a5a692ef387)
+++ b/deletePatient.php	(date 1675880760436)
@@ -16,20 +16,17 @@
 
 
 $id=$_GET["id"];
-//$id = isset($_POST["nhis"]) ? $_POST["nhis"] : null;
 $sql = "DELETE FROM patients WHERE NHIS = $id";
 
 
 $result = mysqli_query($conn, $sql);
-$patients = [];
-
-
 
 
 $tabla = "";
 
 
-    $tabla .= "0 results";
+$tabla = "<h1>Paciente eliminado de la base de datos</h1>";
+$tabla .= "<a href='tablaPacientes.php' class='btn btn-success btn-lg'>Volver</a>";
 
 // Close the connection
 mysqli_close($conn);
Index: searchPatient.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nrequire_once __DIR__ . '/includes/config.php';\r\nrequire_once __DIR__ . '/includes/patient.php';\r\nrequire_once __DIR__ . '/includes/usuarios.php';\r\n\r\n$tituloPagina = 'Search-Patient';\r\n\r\n// Connect to the database\r\n$conn = mysqli_connect(\"localhost\", \"root\", \"\", \"bbdd\");\r\n\r\n// Check the connection\r\nif (!$conn) {\r\n    die(\"Connection failed: \" . mysqli_connect_error());\r\n}\r\n\r\n\r\n\r\n$id = isset($_POST[\"nhis\"]) ? $_POST[\"nhis\"] : null;\r\n$sql = \"SELECT * FROM patients WHERE NHIS = $id\";\r\n\r\n\r\n$result = mysqli_query($conn, $sql);\r\n$patients = [];\r\n$contenidoPrincipal= <<<EOS\r\n<div style=\"width: 1500px; height: 50px; margin: 0 auto; margin-top: 50px;\">\r\n\r\n    <a href=\"generatePdfPatient.php\" class=\"btn btn-success btn-lg\">Crear pdf del paciente $id</a>\r\n    <a href=\"editPatient.php\" class=\"btn btn-success btn-lg\">Modificar datos del paciente $id</a>\r\n    <a href=\"deletePatient.php?id=$id\" class=\"btn btn-success btn-lg\">Borrar paciente $id</a>\r\n    \r\n</div>\r\n<link rel=\"stylesheet\" href=\"css/tableStyle.css\">\r\n<div style=\"width: 1500px; height: 600px; overflow: auto; margin: 0 auto; margin-top: 30px; outline: 2px solid black;\">\r\nEOS;\r\n\r\n\r\n\r\n$tabla = \"\";\r\n\r\nif (mysqli_num_rows($result) > 0) {\r\n    $tabla .= \"<table>\";\r\n    $tabla .= \"<tr>\";\r\n\r\n    // Get the column names\r\n    $column_names = mysqli_fetch_fields($result);\r\n    foreach ($column_names as $column_name) {\r\n        $tabla .= \"<th>\" . $column_name->name . \"</th>\";\r\n    }\r\n\r\n    $tabla .= \"</tr>\";\r\n\r\n    // Loop through the results and print each row\r\n    while ($row = mysqli_fetch_assoc($result)) {\r\n        $tabla .= \"<tr>\";\r\n        foreach ($column_names as $column_name) {\r\n            $tabla .= \"<td>\" . $row[$column_name->name] . \"</td>\";\r\n        }\r\n        $tabla .= \"</tr>\";\r\n    }\r\n\r\n    $tabla .= \"</table>\";\r\n} else {\r\n    $tabla .= \"0 results\";\r\n}\r\n\r\n// Close the connection\r\nmysqli_close($conn);\r\n\r\n$contenidoPrincipal .= $tabla;\r\n$contenidoPrincipal .= \"</div>\";\r\n\r\nrequire __DIR__.'/includes/layout.php';
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/searchPatient.php b/searchPatient.php
--- a/searchPatient.php	(revision 268fe515861317123b2433ef3e037a5a692ef387)
+++ b/searchPatient.php	(date 1675881532868)
@@ -13,26 +13,21 @@
 if (!$conn) {
     die("Connection failed: " . mysqli_connect_error());
 }
-
+$hayResultado=true;
+$contenidoPrincipal="";
 
 
 $id = isset($_POST["nhis"]) ? $_POST["nhis"] : null;
+if($id==null){
+    header('location: tablaPacientes.php');
+
+}
 $sql = "SELECT * FROM patients WHERE NHIS = $id";
 
 
 $result = mysqli_query($conn, $sql);
 $patients = [];
-$contenidoPrincipal= <<<EOS
-<div style="width: 1500px; height: 50px; margin: 0 auto; margin-top: 50px;">
 
-    <a href="generatePdfPatient.php" class="btn btn-success btn-lg">Crear pdf del paciente $id</a>
-    <a href="editPatient.php" class="btn btn-success btn-lg">Modificar datos del paciente $id</a>
-    <a href="deletePatient.php?id=$id" class="btn btn-success btn-lg">Borrar paciente $id</a>
-    
-</div>
-<link rel="stylesheet" href="css/tableStyle.css">
-<div style="width: 1500px; height: 600px; overflow: auto; margin: 0 auto; margin-top: 30px; outline: 2px solid black;">
-EOS;
 
 
 
@@ -61,12 +56,26 @@
 
     $tabla .= "</table>";
 } else {
-    $tabla .= "0 results";
+    $tabla .= "<h1>0 results</h1>";
+    $tabla .= "<a href='tablaPacientes.php' class='btn btn-success btn-lg'>Volver</a>";
+    $hayResultado=false;
 }
 
 // Close the connection
 mysqli_close($conn);
+if($hayResultado){
+    $contenidoPrincipal.= <<<EOS
+<div style="width: 1500px; height: 50px; margin: 0 auto; margin-top: 50px;">
 
+    <a href="generatePdfPatient.php" class="btn btn-success btn-lg">Crear pdf del paciente $id</a>
+    <a href="editPatient.php" class="btn btn-success btn-lg">Modificar datos del paciente $id</a>
+    <a href="deletePatient.php?id=$id" class="btn btn-success btn-lg">Borrar paciente $id</a>
+    
+</div>
+<link rel="stylesheet" href="css/tableStyle.css">
+<div style="width: 1500px; height: 600px; overflow: auto; margin: 0 auto; margin-top: 30px; outline: 2px solid black;">
+EOS;
+}
 $contenidoPrincipal .= $tabla;
 $contenidoPrincipal .= "</div>";
 
Index: procesarLogin.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nrequire_once __DIR__ . '/includes/config.php';\r\nrequire_once __DIR__ . '/includes/usuarios.php';\r\n\r\n$tituloPagina = 'Login';\r\n$log = false;\r\n$contenidoPrincipal='';\r\nif (!checkLogin() && !checkSession()) {\r\n\r\n    header('location: login.php');\r\n    $contenidoPrincipal= <<<EOS\r\n\t\t<h1>Error</h1>\r\n\t\t<p>El email o contraseña introducidos no son válidos.</p>\r\n\t\t<p><a href=\"login.php\"><button>Volver</button></a></p>\r\n\tEOS;\r\n} else {\r\n    $contenidoPrincipal=  <<<EOS\r\n\t\r\n\t\t<h1>Bienvenido/a ${_SESSION['name']}</h1>\r\n\t\t<p>Usa el menú superior para navegar.</p>\r\n\r\n\r\n\tEOS;\r\n}\r\n\r\nrequire __DIR__ . '/includes/layout.php';
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/procesarLogin.php b/procesarLogin.php
--- a/procesarLogin.php	(revision 268fe515861317123b2433ef3e037a5a692ef387)
+++ b/procesarLogin.php	(date 1675881836284)
@@ -5,10 +5,12 @@
 
 $tituloPagina = 'Login';
 $log = false;
+
+
 $contenidoPrincipal='';
 if (!checkLogin() && !checkSession()) {
 
-    header('location: login.php');
+    header("Location: login.php?log=$log");
     $contenidoPrincipal= <<<EOS
 		<h1>Error</h1>
 		<p>El email o contraseña introducidos no son válidos.</p>
Index: css/style.css
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>* {\r\n  font-family: \"Poppins\";\r\n}\r\n\r\ninput[type=submit] {\r\n  font-size: medium;\r\n  width: 50%;\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  padding: 7px 10px;\r\n  margin: 8px 0;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\ninput[type=submit]:hover {\r\n  background-color: #2d6b2f;\r\n}\r\n\r\ntable.formula {\r\n  margin: auto;\r\n  width: 10%;\r\n  border-collapse: separate;\r\n  border: 1px solid #fff; /*for older IE*/\r\n  border-style: hidden;\r\n  overflow: scroll;\r\n}\r\n\r\ntable.formula td {\r\n  padding-right: -100px;\r\n  padding-left: 50px;\r\n  padding-bottom: 10px;\r\n  padding-top: 10px;\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  border-color: #2d8a1e #ffffff;\r\n  font-size: large;\r\n}\r\n\r\ntable.formula tr{\r\n  padding: 1px;\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  border-color: #2d8a1e #ffffff;\r\n}\r\n\r\n\r\nbody {\r\n  -webkit-user-select: none;\r\n     -moz-user-select: none;\r\n      -ms-user-select: none;\r\n          user-select: none;\r\n\r\n\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: #FFFFFF;\r\n  height: 100vh;\r\n  font-size: medium;\r\n}\r\nh1, h2, h3{\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.screen-1 {\r\n  text-align: left;\r\n  background: #f1f7fe;\r\n  padding: 2em;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-radius: 30px;\r\n  box-shadow: 0 0 2em #f3f5fa;\r\n  gap: 2em;\r\n  align-items: center;\r\n}\r\n.screen-1 .logo {\r\n  margin-top: -3em;\r\n}\r\n.screen-1 .email {\r\n  background: white;\r\n  box-shadow: 0 0 2em #e6e9f9;\r\n  padding: 1em;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5em;\r\n  border-radius: 40px;\r\n  color: #4d4d4d;\r\n  margin-top: -4em;\r\n  margin-bottom: 1em;\r\n}\r\n.screen-1 .email input {\r\n  outline: none;\r\n  border: none;\r\n}\r\n.screen-1 .email input::-moz-placeholder {\r\n  color: black;\r\n  font-size: 0.9em;\r\n}\r\n.screen-1 .email input:-ms-input-placeholder {\r\n  color: black;\r\n  font-size: 0.9em;\r\n}\r\n.screen-1 .email input::placeholder {\r\n  color: black;\r\n  font-size: 0.9em;\r\n}\r\n.screen-1 .email ion-icon {\r\n  color: #4d4d4d;\r\n  margin-bottom: -0.2em;\r\n}\r\n.screen-1 .password {\r\n  background: white;\r\n  box-shadow: 0 0 2em #e6e9f9;\r\n  padding: 1em;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5em;\r\n  border-radius: 20px;\r\n  color: #4d4d4d;\r\n  margin-bottom: 1em;\r\n}\r\n.screen-1 .password input {\r\n  outline: none;\r\n  border: none;\r\n}\r\n.screen-1 .password input::-moz-placeholder {\r\n  color: black;\r\n  font-size: 0.9em;\r\n}\r\n.screen-1 .password input:-ms-input-placeholder {\r\n  color: black;\r\n  font-size: 0.9em;\r\n}\r\n.screen-1 .password input::placeholder {\r\n  color: black;\r\n  font-size: 0.9em;\r\n}\r\n.screen-1 .password ion-icon {\r\n  color: #4d4d4d;\r\n  margin-bottom: -0.2em;\r\n}\r\n.screen-1 .password .show-hide {\r\n  margin-right: -5em;\r\n}\r\n.screen-1 .login {\r\n  padding: 1em;\r\n  background: #3e4684;\r\n  color: white;\r\n  border: none;\r\n  font-weight: 600;\r\n  flex-direction: column;\r\n  gap: 0.5em;\r\n  border-radius: 20px;\r\n  margin-left: 28%;\r\n}\r\n.screen-1 .footer {\r\n  display: flex;\r\n  font-size: 0.7em;\r\n  color: #5e5e5e;\r\n  gap: 14em;\r\n  padding-bottom: 10em;\r\n}\r\n.screen-1 .footer span {\r\n  cursor: pointer;\r\n}\r\n\r\n\r\nbutton {\r\n  cursor: pointer;\r\n  font-size: medium;\r\n  width: 10%;\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  padding: 7px 10px;\r\n  margin: 8px 0;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  alignment: center;\r\n  align-items: center;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #2d6b2f;\r\n}\r\n\r\n.btnprof {\r\n  cursor: pointer;\r\n  font-size: medium;\r\n  width: 70%;\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  padding: 7px 10px;\r\n  margin: 8px 0;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  alignment: center;\r\n  align-items: center;\r\n}\r\n\r\nbutton.cancel{\r\n  font-size: medium;\r\n  width: 50%;\r\n  background-color: #4CAF50;\r\n  color: white;\r\n  padding: 7px 10px;\r\n  margin: 8px 0;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  alignment: right;\r\n  align-items: end;\r\n  margin-left: 25%;\r\n}\r\n\r\nbutton.cancel:hover {\r\n  background-color: #2d6b2f;\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/css/style.css b/css/style.css
--- a/css/style.css	(revision 268fe515861317123b2433ef3e037a5a692ef387)
+++ b/css/style.css	(date 1675883596041)
@@ -66,6 +66,14 @@
   margin-bottom: 10px;
 }
 
+h3.erroneo{
+  justify-content: center;
+  align-items: center;
+  text-align: center;
+  margin-bottom: 10px;
+color: red;
+}
+
 .screen-1 {
   text-align: left;
   background: #f1f7fe;
@@ -155,7 +163,8 @@
   flex-direction: column;
   gap: 0.5em;
   border-radius: 20px;
-  margin-left: 28%;
+  margin-left: 25%;
+
 }
 .screen-1 .footer {
   display: flex;
Index: editPatient.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/editPatient.php b/editPatient.php
new file mode 100644
--- /dev/null	(date 1675883596058)
+++ b/editPatient.php	(date 1675883596058)
@@ -0,0 +1,37 @@
+<?php
+
+require_once __DIR__ . '/includes/config.php';
+require_once __DIR__ . '/includes/patient.php';
+require_once __DIR__ . '/includes/usuarios.php';
+
+$tituloPagina = 'Search-Patient';
+
+// Connect to the database
+$conn = mysqli_connect("localhost", "root", "", "bbdd");
+
+// Check the connection
+if (!$conn) {
+    die("Connection failed: " . mysqli_connect_error());
+}
+
+
+$id=$_GET["id"];
+$sql = "UPDATE `patients` SET `FECHACIR` = '%s' WHERE `patients`.`NHIS` = '%s', $conn->real_escape_string('nuevoName'), $conn->real_escape_string($this->id));";
+
+
+$result = mysqli_query($conn, $sql);
+
+
+$tabla = "";
+
+
+$tabla = "<h1>Paciente eliminado de la base de datos</h1>";
+$tabla .= "<a href='tablaPacientes.php' class='btn btn-success btn-lg'>Volver</a>";
+
+// Close the connection
+mysqli_close($conn);
+
+$contenidoPrincipal = $tabla;
+$contenidoPrincipal .= "</div>";
+
+require __DIR__.'/includes/layout.php';
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"2e928c23-c77c-46aa-9f96-1824530a49fd\" name=\"Changes\" comment=\"qtal\">\r\n      <change afterPath=\"$PROJECT_DIR$/deletePatient.php\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/addPatient.php\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/addPatient.php\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/includes/patient.php\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/includes/patient.php\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/searchPatient.php\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/searchPatient.php\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"ComposerSettings\" doNotAsk=\"true\">\r\n    <pharConfigPath>$PROJECT_DIR$/dompdf/composer.json</pharConfigPath>\r\n    <execution />\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$/..\" />\r\n  </component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"2LPuAygWbrLw3mTUHgVZc1ZRjdL\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\" />\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\"><![CDATA[{\r\n  \"keyToString\": {\r\n    \"RunOnceActivity.OpenProjectViewOnStart\": \"true\",\r\n    \"RunOnceActivity.ShowReadmeOnStart\": \"true\",\r\n    \"WebServerToolWindowFactoryState\": \"false\",\r\n    \"last_opened_file_path\": \"C:/xampp/htdocs/TFGit/TFG/src\",\r\n    \"node.js.detected.package.eslint\": \"true\",\r\n    \"node.js.detected.package.tslint\": \"true\",\r\n    \"node.js.selected.package.eslint\": \"(autodetect)\",\r\n    \"node.js.selected.package.tslint\": \"(autodetect)\",\r\n    \"vue.rearranger.settings.migration\": \"true\"\r\n  }\r\n}]]></component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\xampp\\htdocs\\TFGit\\TFG\\src\" />\r\n    </key>\r\n    <key name=\"MoveFile.RECENT_KEYS\">\r\n      <recent name=\"C:\\xampp\\htdocs\\TFGit\\TFG\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"2e928c23-c77c-46aa-9f96-1824530a49fd\" name=\"Changes\" comment=\"\" />\r\n      <created>1675784898779</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1675784898779</updated>\r\n      <workItem from=\"1675784900070\" duration=\"315000\" />\r\n      <workItem from=\"1675785218386\" duration=\"12921000\" />\r\n      <workItem from=\"1675800512180\" duration=\"1484000\" />\r\n      <workItem from=\"1675872123713\" duration=\"6128000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"eo\">\r\n      <created>1675785240096</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1675785240096</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00002\" summary=\"paza\">\r\n      <created>1675790634770</created>\r\n      <option name=\"number\" value=\"00002\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1675790634770</updated>\r\n    </task>\r\n    <task id=\"LOCAL-00003\" summary=\"qtal\">\r\n      <created>1675799508097</created>\r\n      <option name=\"number\" value=\"00003\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1675799508097</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"4\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"eo\" />\r\n    <MESSAGE value=\"paza\" />\r\n    <MESSAGE value=\"qtal\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"qtal\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision 268fe515861317123b2433ef3e037a5a692ef387)
+++ b/.idea/workspace.xml	(date 1675883596093)
@@ -4,12 +4,15 @@
     <option name="autoReloadType" value="SELECTIVE" />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="2e928c23-c77c-46aa-9f96-1824530a49fd" name="Changes" comment="qtal">
-      <change afterPath="$PROJECT_DIR$/deletePatient.php" afterDir="false" />
+    <list default="true" id="2e928c23-c77c-46aa-9f96-1824530a49fd" name="Changes" comment="deletePat">
+      <change afterPath="$PROJECT_DIR$/editPatient.php" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/addPatient.php" beforeDir="false" afterPath="$PROJECT_DIR$/addPatient.php" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/includes/patient.php" beforeDir="false" afterPath="$PROJECT_DIR$/includes/patient.php" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/css/style.css" beforeDir="false" afterPath="$PROJECT_DIR$/css/style.css" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/deletePatient.php" beforeDir="false" afterPath="$PROJECT_DIR$/deletePatient.php" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/login.php" beforeDir="false" afterPath="$PROJECT_DIR$/login.php" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/procesarLogin.php" beforeDir="false" afterPath="$PROJECT_DIR$/procesarLogin.php" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/searchPatient.php" beforeDir="false" afterPath="$PROJECT_DIR$/searchPatient.php" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/tablaPacientes.php" beforeDir="false" afterPath="$PROJECT_DIR$/tablaPacientes.php" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -64,7 +67,7 @@
       <workItem from="1675784900070" duration="315000" />
       <workItem from="1675785218386" duration="12921000" />
       <workItem from="1675800512180" duration="1484000" />
-      <workItem from="1675872123713" duration="6128000" />
+      <workItem from="1675872123713" duration="11079000" />
     </task>
     <task id="LOCAL-00001" summary="eo">
       <created>1675785240096</created>
@@ -87,7 +90,14 @@
       <option name="project" value="LOCAL" />
       <updated>1675799508097</updated>
     </task>
-    <option name="localTasksCounter" value="4" />
+    <task id="LOCAL-00004" summary="deletePat">
+      <created>1675878862017</created>
+      <option name="number" value="00004" />
+      <option name="presentableId" value="LOCAL-00004" />
+      <option name="project" value="LOCAL" />
+      <updated>1675878862017</updated>
+    </task>
+    <option name="localTasksCounter" value="5" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
@@ -108,6 +118,7 @@
     <MESSAGE value="eo" />
     <MESSAGE value="paza" />
     <MESSAGE value="qtal" />
-    <option name="LAST_COMMIT_MESSAGE" value="qtal" />
+    <MESSAGE value="deletePat" />
+    <option name="LAST_COMMIT_MESSAGE" value="deletePat" />
   </component>
 </project>
\ No newline at end of file
Index: tablaPacientes.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nrequire_once __DIR__.'/includes/config.php';\r\nrequire_once __DIR__.'/includes/patient.php';\r\nrequire_once __DIR__ . '/includes/usuarios.php';\r\n\r\n$tituloPagina = 'Patient Table';\r\n\r\n$contenidoPrincipal= <<<EOS\r\n<link rel=\"stylesheet\" href=\"css/tableStyle.css\">\r\n<div style=\"width: 1500px; height: 50px; margin: 0 auto; margin-top: 50px;\">\r\n\t  \r\n    <form class=\"search-container\" action=\"searchPatient.php\" method=\"post\">\r\n        <input type=\"text\" name=\"nhis\" id=\"idInput\" placeholder=\"Introduzca el NHIS a buscar\">\r\n        <button id=\"searchBtn\">Search</button>\r\n    </form>\r\n\r\n</div>\r\n<div style=\"width: 1500px; height: 600px; overflow: auto; margin: 0 auto; margin-top: 30px; outline: 2px solid black;\">\r\nEOS;\r\n\r\n$tabla = \"\";\r\n\r\n// Connect to the database\r\n$conn = mysqli_connect(\"localhost\", \"root\", \"\", \"bbdd\");\r\n\r\n// Check the connection\r\nif (!$conn) {\r\n  die(\"Connection failed: \" . mysqli_connect_error());\r\n}\r\n\r\n// Write the SQL query\r\n$sql = \"SELECT * FROM patients\";\r\n\r\n// Execute the query\r\n$result = mysqli_query($conn, $sql);\r\n\r\n// Check if the query was successful\r\nif (mysqli_num_rows($result) > 0) {\r\n  $tabla .= \"<table>\";\r\n  $tabla .= \"<tr>\";\r\n\r\n  // Get the column names\r\n  $column_names = mysqli_fetch_fields($result);\r\n  foreach ($column_names as $column_name) {\r\n    $tabla .= \"<th>\" . $column_name->name . \"</th>\";\r\n  }\r\n\r\n  $tabla .= \"</tr>\";\r\n\r\n  // Loop through the results and print each row\r\n  while ($row = mysqli_fetch_assoc($result)) {\r\n    $tabla .= \"<tr>\";\r\n    foreach ($column_names as $column_name) {\r\n      $tabla .= \"<td>\" . $row[$column_name->name] . \"</td>\";\r\n    }\r\n    $tabla .= \"</tr>\";\r\n  }\r\n\r\n  $tabla .= \"</table>\";\r\n} else {\r\n  $tabla .= \"0 results\";\r\n}\r\n\r\n\r\n\r\n\r\n// Close the connection\r\nmysqli_close($conn);\r\n\r\n$contenidoPrincipal .= $tabla;\r\n$contenidoPrincipal .= \"</div>\";\r\n\r\n\r\nrequire __DIR__.'/includes/layout.php';
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/tablaPacientes.php b/tablaPacientes.php
--- a/tablaPacientes.php	(revision 268fe515861317123b2433ef3e037a5a692ef387)
+++ b/tablaPacientes.php	(date 1675879955700)
@@ -59,7 +59,7 @@
 
   $tabla .= "</table>";
 } else {
-  $tabla .= "0 results";
+  $tabla .= "<div>0 results</div>";
 }
 
 
